# Use the official Gradle image as the builder
FROM gradle:7.6.4-jdk17 AS build

# Copy the application code to the container
COPY . /app

# Set the working directory inside the container
WORKDIR /app

CMD ["./gradlew", "clean", "bootJar"]

# 빌더 이미지에서 jar 파일만 복사'
COPY build/libs/*.jar ./app.jar
# COPY --from=builder /build/build/libs/bbs-0.0.1-SNAPSHOT.jar .

EXPOSE 8080

ENTRYPOINT [                                                \
   "java",                                                 \
   "-jar",                                                 \
   "app.jar"             \
]
